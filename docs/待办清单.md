# Voice Book - 待办事项清单

最后更新: 2025-11-29

## 🔥 高优先级（紧急重要）

### 1. 搭建项目基础架构
- **截止日期**: 2025-12-01
- **预计工作量**: 2天
- **描述**: 创建项目目录结构、基础模型、数据库设计
- **详细任务**:
  - [ ] 创建标准目录结构
    - lib/models/ (数据模型)
    - lib/providers/ (状态管理)
    - lib/screens/ (页面)
    - lib/widgets/ (组件)
    - lib/services/ (服务层)
    - lib/utils/ (工具类)
  - [ ] 设计数据库表结构
    - books 表（书籍信息）
    - audio_files 表（音频文件）
    - playback_progress 表（播放进度）
    - bookmarks 表（书签）
  - [ ] 创建基础 Model 类
    - Book 模型
    - AudioFile 模型
    - PlaybackProgress 模型
    - Bookmark 模型
  - [ ] 搭建 Provider 架构
    - BookProvider
    - AudioPlayerProvider
    - SettingsProvider

### 2. 实现音频文件管理功能 (REQ-001)
- **截止日期**: 2025-12-04
- **预计工作量**: 3天
- **依赖**: 基础架构完成
- **描述**: 实现本地音频文件的扫描、导入和管理
- **详细任务**:
  - [ ] 实现文件扫描服务
  - [ ] 实现文件导入功能
  - [ ] 实现文件列表展示
  - [ ] 实现文件元数据读取
  - [ ] 添加权限请求处理

### 3. 实现音频播放功能 (REQ-002)
- **截止日期**: 2025-12-08
- **预计工作量**: 4天
- **依赖**: 音频文件管理完成
- **描述**: 实现完整的音频播放控制功能
- **详细任务**:
  - [ ] 集成 just_audio 播放器
  - [ ] 实现播放/暂停/停止控制
  - [ ] 实现进度条和拖动
  - [ ] 实现倍速播放
  - [ ] 实现后台播放
  - [ ] 实现播放器 UI

## 📌 中优先级（重要不紧急）

### 4. 实现播放进度记忆 (REQ-003)
- **截止日期**: 2025-12-10
- **预计工作量**: 2天
- **依赖**: 音频播放功能完成
- **描述**: 自动保存和恢复播放进度
- **详细任务**:
  - [ ] 实现进度自动保存
  - [ ] 实现进度恢复
  - [ ] 实现多文件进度管理
  - [ ] 优化保存性能

### 5. 实现书籍管理功能 (REQ-004)
- **截止日期**: 2025-12-13
- **预计工作量**: 3天
- **依赖**: 基础架构完成
- **描述**: 实现书籍的组织和管理功能
- **详细任务**:
  - [ ] 实现书籍创建
  - [ ] 实现书籍列表
  - [ ] 实现书籍详情页
  - [ ] 实现书籍搜索
  - [ ] 实现书籍编辑和删除

### 6. 实现书籍播放位置记忆 (REQ-005)
- **截止日期**: 2025-12-14
- **预计工作量**: 1天
- **依赖**: 音频播放功能完成
- **描述**: 记录每本书籍当前播放的音频位置，进入书籍时自动定位
- **详细任务**:
  - [ ] 在 books 表中添加 current_audio_id 字段
  - [ ] 在 AudioPlayerProvider 中切换音频时更新书籍的当前音频
  - [ ] 在 BookDetailScreen 中进入时自动滚动到当前播放音频
  - [ ] 高亮显示当前播放的音频项
  - [ ] 测试多本书籍的位置记忆

### 7. 实现迷你播放器悬浮框 (REQ-006)
- **截止日期**: 2025-12-16
- **预计工作量**: 2天
- **依赖**: 音频播放功能完成
- **描述**: 在主页右下角显示迷你播放器，实时同步播放状态
- **详细任务**:
  - [ ] 创建 MiniPlayer Widget 组件
  - [ ] 实现固定在右下角的悬浮布局
  - [ ] 显示正在播放的音频标题
  - [ ] 实现标题过长时的滚动动画
  - [ ] 显示播放/暂停状态图标（动态切换）
  - [ ] 实现点击跳转到完整播放页
  - [ ] 实现播放/暂停快捷操作
  - [ ] 固定组件尺寸，优化响应式布局

### 8. 实现独立播放页面 (REQ-007)
- **截止日期**: 2025-12-17
- **预计工作量**: 1天
- **依赖**: 音频播放功能完成
- **描述**: 将播放页面独立为主页Tab，默认进入该页面
- **详细任务**:
  - [ ] 修改主页底部导航为三个Tab：书架/正在播放/设置
  - [ ] 将 PlayerScreen 集成到"正在播放"Tab
  - [ ] 实现无播放内容时的引导界面
  - [ ] 设置 App 启动时默认进入"正在播放"页面
  - [ ] 保存用户最后访问的 Tab（可选）
  - [ ] 测试页面切换流畅性

### 9. 实现书签功能 (REQ-008)
- **截止日期**: 2025-12-19
- **预计工作量**: 2天
- **依赖**: 音频播放功能完成
- **描述**: 支持在播放过程中添加书签
- **详细任务**:
  - [ ] 实现书签添加
  - [ ] 实现书签列表
  - [ ] 实现书签跳转
  - [ ] 实现书签删除

### 10. 实现播放列表 (REQ-009)
- **截止日期**: 2025-12-21
- **预计工作量**: 2天
- **依赖**: 音频播放功能完成
- **描述**: 支持创建和管理播放列表
- **详细任务**:
  - [ ] 实现播放列表创建
  - [ ] 实现播放列表管理
  - [ ] 实现连续播放
  - [ ] 实现播放顺序调整

### 11. 实现睡眠定时器 (REQ-010)
- **截止日期**: 2025-12-23
- **预计工作量**: 1天
- **依赖**: 音频播放功能完成
- **描述**: 支持定时停止播放
- **详细任务**:
  - [ ] 实现定时器设置
  - [ ] 实现倒计时显示
  - [ ] 实现自动停止
  - [ ] 实现定时器取消

## 💡 低优先级（可延后）

### 12. 实现主题切换 (REQ-011)
- **截止日期**: 2025-12-25
- **预计工作量**: 1天
- **描述**: 支持明暗主题切换
- **详细任务**:
  - [ ] 定义主题样式
  - [ ] 实现主题切换逻辑
  - [ ] 实现主题持久化
  - [ ] 实现跟随系统主题

### 13. 实现数据备份与恢复 (REQ-012)
- **截止日期**: 2025-12-27
- **预计工作量**: 2天
- **描述**: 支持用户数据的备份和恢复
- **详细任务**:
  - [ ] 实现数据导出
  - [ ] 实现数据导入
  - [ ] 实现备份文件管理
  - [ ] 添加进度提示

### 14. 性能优化
- **截止日期**: 2025-12-27
- **预计工作量**: 2天
- **描述**: 优化应用性能和用户体验
- **详细任务**:
  - [ ] 优化启动速度
  - [ ] 优化列表加载性能
  - [ ] 优化内存占用
  - [ ] 优化电池消耗

### 15. 添加单元测试
- **截止日期**: 2025-12-29
- **预计工作量**: 2天
- **描述**: 为核心功能添加单元测试
- **详细任务**:
  - [ ] 为 Model 类添加测试
  - [ ] 为 Provider 添加测试
  - [ ] 为 Service 添加测试
  - [ ] 提高测试覆盖率到 60%+

## 🔄 进行中

暂无进行中的任务

## ✅ 最近完成

### 项目初始化 (完成于 2025-11-29)
- [x] 创建 Flutter 项目
  - 耗时: 0.5天
  - 说明: 完成项目基础结构创建

- [x] 添加核心依赖
  - 耗时: 0.5天
  - 说明: 添加 provider、sqflite、just_audio 等核心依赖包

- [x] 创建项目管理文档
  - 耗时: 0.5天
  - 说明: 创建需求文档、项目状态、待办清单等标准化文档

## 📊 任务统计

- **总任务数**: 15
- **已完成**: 3 (20%)
- **进行中**: 0 (0%)
- **待办**: 12 (80%)
  - 高优先级: 3
  - 中优先级: 8
  - 低优先级: 4

## 🎯 本周计划 (2025-11-30 至 2025-12-06)

1. **周六-周日**: 完成播放进度记忆和后台播放
2. **周一-周二**: 实现书籍播放位置记忆（REQ-005）
3. **周三-周四**: 实现迷你播放器悬浮框（REQ-006）
4. **周五**: 实现独立播放页面（REQ-007）

## 📅 本月目标 (2025-12)

- 完成 MVP 版本开发（REQ-001 至 REQ-004）✅
- 完成增强功能开发（REQ-005 至 REQ-010）
- 完成优化功能开发（REQ-011 至 REQ-012）
- 准备正式版本发布

## 💡 注意事项

- ⚠️ 开发过程中严格遵循 Flutter 最佳实践
- ⚠️ 确保代码注释完整，便于后期维护
- ⚠️ 每完成一个功能模块，运行 `/update-status` 更新项目状态
- ⚠️ 定期进行代码审查，保证代码质量
- ⚠️ 注意性能优化，确保低资源占用

## 🔗 相关文档

- [需求文档](./需求文档.md)
- [项目状态](./项目状态.md)
